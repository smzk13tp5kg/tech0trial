import streamlit as st

# ----------------------------------------
# ページ設定
# ----------------------------------------
st.set_page_config(
    page_title="Git 用語辞典",
    layout="wide"
)

st.title("Git 用語ミニ辞典（OneDriveとの比較で理解）")


# ----------------------------------------
# Git 全体説明（右カラムに固定表示）
# ----------------------------------------
GIT_OVERVIEW = """
## 🔵 Git と OneDrive の違い（固定表示）

### 1. 管理する単位が違う
**OneDrive**：ファイル単体の過去版を保存（最大500版）  
**Git**：フォルダ全体の“その瞬間の状態”を保存  
→ 履歴は無制限  

---

### 2. 壊したときに戻せる範囲が違う
**OneDrive**  
- 消したファイルだけ戻せる  
- フォルダ全体は戻らない  

**Git**  
- フォルダ全体を過去状態に戻せる  
- うっかり削除しても安全  

---

### 3. 履歴の作られ方が違う
**OneDrive**：修正前のファイルコピーを丸ごと保存  
**Git**：  
- 変わった部分だけ新しく保存  
- 変わらない部分は過去のデータを再利用  
→ それでも「フォルダ丸ごとのスナップショット」が残る
"""


# ----------------------------------------
# 用語データ（中央で切り替わる）
# ----------------------------------------
TERMS = {
    "リポジトリ（repository）": {
        "meaning": "フォルダ全体の履歴を保存する場所（プロジェクトのタイムマシン）。",
        "desc": """
### リポジトリ（repository）

- Git が履歴を保存する場所  
- OneDrive は“ファイル単位”だが、Git は“フォルダ全体”を管理  
- 過去の任意の状態にフォルダごと戻せる  
"""
    },
    "リモートリポジトリ（remote repository）": {
        "meaning": "インターネット上にある共有リポジトリ。",
        "desc": """
### リモートリポジトリ（remote repository）

- GitHub や Azure DevOps 上にある共有の履歴置き場  
- チームメンバーが push / pull して使う  
"""
    },
    "ローカルリポジトリ（local repository）": {
        "meaning": "自分のPCにある履歴のコピー。",
        "desc": """
### ローカルリポジトリ（local repository）

- 自分の PC 上にある Git の履歴（.git）  
- 作業のほとんどはローカルで完結  
"""
    },
    "ブランチ（branch）": {
        "meaning": "プロジェクトの“作業用コピー”を並列に持てる仕組み。",
        "desc": """
### ブランチ（branch）

- フォルダ丸ごとの“作業レーン”  
- OneDrive のようにファイル上書き競合を起こさずに並行作業できる  
"""
    },
    "プッシュ（push）": {
        "meaning": "ローカルの履歴をリモートに送ること。",
        "desc": """
### プッシュ（push）

- 自分のコミットを GitHub に送る  
- チームへ“成果物提出”  
"""
    },
    "プル（pull）": {
        "meaning": "リモートの変更を取り込み、自分の作業に反映。",
        "desc": """
### プル（pull）

- `fetch + merge`  
- みんなの作業を取り込んで最新状態にする  
"""
    },
    "クローン（clone）": {
        "meaning": "リモートのリポジトリを丸ごと手元にコピー。",
        "desc": """
### クローン（clone）

- GitHub のプロジェクトをPCにダウンロードする  
- 履歴すべて含む“完全コピー”  
"""
    },
    "コミット（commit）": {
        "meaning": "フォルダ全体の“状態”を保存すること。",
        "desc": """
### コミット（commit）

- フォルダ全体のスナップショット  
- OneDrive より強力：フォルダ全体＋無制限  
"""
    },
    # --- 必要に応じてここに他の用語も追加 ---
}


# ----------------------------------------
# 3 カラム構成
# ----------------------------------------
col_left, col_center, col_right = st.columns([1.2, 2, 1.2])


# ----------------------------------------
# 左：用語選択（固定）
# ----------------------------------------
with col_left:
    st.subheader("用語を選択")
    selected = st.radio(
        "",
        list(TERMS.keys()),
        index=0
    )


# ----------------------------------------
# 中央：用語の説明（選択に応じて変わる）
# ----------------------------------------
with col_center:
    term = TERMS[selected]
    st.subheader(selected)
    st.markdown(f"**意味：** {term['meaning']}")
    st.markdown("---")
    st.markdown(term["desc"])


# ----------------------------------------
# 右：Git全体の説明（固定）
# ----------------------------------------
with col_right:
    st.subheader("Git の基本説明（固定）")
    st.markdown(GIT_OVERVIEW)
