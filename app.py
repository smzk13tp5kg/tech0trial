import streamlit as st

# ----------------------------------------
# ページ設定
# ----------------------------------------
st.set_page_config(
    page_title="Git 用語辞典",
    layout="wide"
)

st.title("Git 用語ミニ辞典")

# ----------------------------------------
# Git 全体説明（右カラムに固定表示するテキスト）
# ----------------------------------------
GIT_OVERVIEW = """
## ◆ OneDrive と Git の違い

### 🔵 1. 管理する単位が違う

**OneDrive：ファイル単位**

- ファイルを保存するたびに、そのファイルの過去版が残る  
- 最大 500 個まで過去版が持てる  
- 管理しているのは「ファイルだけ」  

**Git：フォルダ（プロジェクト）全体**

- 変更を保存（コミット）すると、フォルダ全体の「その瞬間の状態」を記録できる  
- 過去の状態を **何回でも** 残して戻せる  
- 管理しているのは「フォルダまるごと」  

※「コミット」= Git での「保存」の呼び方  

---

### 🔵 2. 壊したときに戻せる範囲が違う

**OneDrive**

- 消したファイル 1 つだけ戻せる  
- フォルダ全体の構成までは戻らない  

**Git**

- フォルダまるごと、過去の状態で戻せる  
- うっかりフォルダを壊しても安心  

---

### 🔵 3. 履歴の作り方が違う

**OneDrive**

- ファイルの「変更前の版」を丸ごと保存  
- 同じファイルを 500 回変更すると、500 個の古いファイルがあるイメージ  

**Git**

- 一見「フォルダ丸ごと」を毎回保存しているように見えるが…  
- 実際は「変わった部分だけ」を新しく保存し、変わっていない部分は過去のデータを再利用  

**具体例：**

- 1 回目：ファイル A、B、C を保存（合計 100MB）  
- 2 回目：ファイル B だけ変更  
  - Git は「B の変更分だけ」を新しく保存し、A と C は 1 回目のを再利用  
  - 結果、2 回目の保存は数 MB で済む  

→ だから **速くて軽い！**  
→ でも **結果として「フォルダ全体のスナップショット」はちゃんと残る**  

---

### 🔵 4. 複数人で作業する仕組みが違う

**OneDrive**

- 同じファイルを開くと上書きがぶつかる  
- 基本、誰か 1 人ずつしか更新できない  

**Git**

- ブランチ（作業用のコピー）を作れる  
- 各自が自分のコピーで自由に作業し、完成したら **マージ（統合）** できる  

**例：**

- A さんが「デザイン修正用のコピー」で作業  
- B さんが「機能追加用のコピー」で作業  
- 完成後、2 つのコピーを本体に統合  

→ ファイル単位ではなく、**フォルダ全体を並列で進められる**  

---

## ◆ まとめ（10秒版）

- OneDrive = ファイルのバックアップ（最大 500 回分）  
- Git = フォルダ全体の履歴を何回でも残せるタイムマシン  
- OneDrive は「ファイル単体」、Git は「プロジェクト全体」を扱う  
- Git の方が複数人同時作業も安全  

---

## ◆ もっと短い完全版（Slack / Teams 用）

- **OneDrive**：ファイルの過去版を最大 500 個まで残す仕組み。  
- **Git**：フォルダ全体の状態を何回でも保存し、いつでも戻れる仕組み。  
  変わった部分だけ保存するので速くて軽い。  
  複数人が同時に作業しても衝突しない（ブランチ＋マージ）。  
"""


# ----------------------------------------
# 用語データ（中央で切り替わる）
# ----------------------------------------
TERMS = {
    "リポジトリ（repository）": {
        "meaning": "フォルダ全体の履歴を保存する場所（プロジェクトのタイムマシン）。",
        "desc": """
- Git が履歴を保存する場所  
- OneDrive は“ファイル単位”だが、Git は“フォルダ全体”を管理  
- 過去の任意の状態にフォルダごと戻せる  
"""
    },
    "リモートリポジトリ（remote repository）": {
        "meaning": "インターネット上にある共有リポジトリ。",
        "desc": """
- GitHub や Azure DevOps 上にある共有の履歴置き場  
- チームメンバーが push / pull して使う  
"""
    },
    "ローカルリポジトリ（local repository）": {
        "meaning": "自分のPCにある履歴のコピー。",
        "desc": """
- 自分の PC 上にある Git の履歴（.git）  
- 作業のほとんどはローカルで完結  
"""
    },
    "ブランチ（branch）": {
        "meaning": "プロジェクトの“作業用コピー”を並列に持てる仕組み。",
        "desc": """
- フォルダ丸ごとの“作業レーン”  
- main とは別の線路の上で安全に試せる  
- OneDrive のような上書き競合を避けられる  
"""
    },
    "プッシュ（push）": {
        "meaning": "ローカルの履歴をリモートに送ること。",
        "desc": """
- 自分のコミットを GitHub などの共有リポジトリに送る  
- チームへの“成果物提出”に相当  
"""
    },
    "プル（pull）": {
        "meaning": "リモートの変更を取り込み、自分の作業に反映。",
        "desc": """
- `fetch + merge` をまとめて行う操作  
- 他メンバーの作業を自分のブランチに取り込む  
"""
    },
    "クローン（clone）": {
        "meaning": "リモートのリポジトリを丸ごと手元にコピー。",
        "desc": """
- `git clone URL` で実行  
- 履歴すべてを含んだ“完全コピー”  
- 作業を始める最初の一手  
"""
    },
    "コミット（commit）": {
        "meaning": "フォルダ全体の“状態”を保存すること。",
        "desc": """
- プロジェクトのスナップショットを1枚撮るイメージ  
- メッセージ付きで「何をした変更か」を残す  
- OneDrive より強力：フォルダ全体＆無制限  
"""
    },
    # 他の用語も同じスタイルで追加していけばOK
}

# ----------------------------------------
# 3 カラム構成
# ----------------------------------------
col_left, col_center, col_right = st.columns([1.2, 2, 1.2])

# ----------------------------------------
# 左：用語選択（固定）
# ----------------------------------------
with col_left:
    st.subheader("用語を選択")
    selected = st.radio(
        "",
        list(TERMS.keys()),
        index=0
    )

# ----------------------------------------
# 中央：用語の説明（選択に応じて変わる）
# ----------------------------------------
with col_center:
    term = TERMS[selected]
    st.subheader(selected)
    st.markdown(f"**意味：** {term['meaning']}")
    st.markdown("---")
    st.markdown(term["desc"])

# ----------------------------------------
# 右：Git全体の説明（固定＋スクロール表示）
# ----------------------------------------
with col_right:
    st.subheader("Git の基本説明（固定）")

    # ▼ CSS で高さ固定＋スクロール指定
    scroll_area_style = """
    <style>
    .scroll-area {
        height: 600px;        /* ← 好きな高さにしてOK */
        overflow-y: scroll;
        padding-right: 10px;
        border: 1px solid #DDD;
        border-radius: 5px;
    }
    </style>
    """
    st.markdown(scroll_area_style, unsafe_allow_html=True)
    st.markdown(f"<div class='scroll-area'>{GIT_OVERVIEW}</div>", unsafe_allow_html=True)

